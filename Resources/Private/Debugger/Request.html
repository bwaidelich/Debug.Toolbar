<f:layout name="Default" />

<f:section name="Widget">

<f:for each="{steps}" as="step" iteration="loop">
<div class="debug-toolbar-item">
		<f:if condition="{loop.isLast}">
			<f:then>
			<div class="block">
				<div class="block-icon">
			        <f:link.action action="index" controller="profile" package="Debug.Toolbar" arguments="{token: step.token, renderer: 'Request'}" target="_blank">
				        <span class="bubble">{step.mainRequest.controllerName} :: {step.mainRequest.controllerActionName}</span>
		        		<span class="bubble {step.responseColor}">{step.responseCode}</span>
		        	</f:link.action>
				</div>
		    </f:then>
		    <f:else>
			<div class="block arrow">
				<div class="block-icon">
		        	<f:link.action action="index" controller="profile" package="Debug.Toolbar" arguments="{token: step.token}" target="_blank">
		        		<span class="bubble {step.responseColor}">{step.responseCode}</span>
		        	</f:link.action>
				</div>
	        </f:else>
    	</f:if>
		<div class="block-popup block-popup-full">
			<h3>Requests</h3>

			<f:for each="{step.requests}" as="request">
				<div class="tab-content">
					<table class="table table-striped table-bordered table-borderedtable-definition-style">
						<tr>
							<th>
								{request.controllerPackageKey}.{request.controllerSubpackageKey}:{request.controllerName} :: {request.controllerActionName}
							</th>
						</tr>
						<f:if condition="{request.argumentNamespace}">
						<tr>
							<td>
								<b>Namespace: </b> {request.argumentNamespace}
							</td>
						</tr>
						</f:if>
						<tr>
							<td>
								<i>Arguments</i>
								<f:render partial="ArrayList" arguments="{array: request.arguments}" />
							</td>
						</tr>
					</table>
				</div>
			</f:for>
		</div>
	</div>
</div>
</f:for>
</f:section>

<f:section name="Button">
	
</f:section>

<f:section name="Panel">
	<h3>Routes</h3>
	<table class="table table-striped table-bordered">
		<f:for each="{routes}" as="route">
		<tr>
			<td>{route}</td>
		</tr>
		</f:for>
	</table>

	<h3>Requests</h3>
	<f:for each="{requests}" as="request">
	<table class="table table-striped table-bordered">
		<tr>
			<td colspan="2"><span class="bubble">{request.controllerPackageKey}.{request.controllerSubpackageKey}:{request.controllerName} :: {request.controllerActionName}</span></td>
		</tr>
		<f:if condition="{request.argumentNamespace}">
		<tr>
			<td>
				{request.argumentNamespace}
			</td>
		</tr>
		</f:if>
		<tr>
			<td>
				<b>Arguments</b>
				<f:render partial="ArrayList" arguments="{array: request.arguments}" />
			</td>
		</tr>
		<tr>
			<td>
				<b>PluginArguments</b>
				<f:render partial="ArrayList" arguments="{array: request.pluginArguments}" />
			</td>
		</tr>
		<tr>
			<td>
				<b>InternalArguments</b>
				<f:render partial="ArrayList" arguments="{array: request.internalArguments}" />
			</td>
		</tr>
	</table>
	</f:for>

	<f:for each="{arrays}" as="array" key="title">
	<h3>{title}</h3>
	<f:render partial="ArrayTable" arguments="{array: array}" />
	</f:for>
</f:section>